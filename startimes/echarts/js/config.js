//经纬度
var geoCoordMap = {
  '北京': [58, 35.5],
  '亚马逊云': [-3, 37.4],
  '卫星': [-20, 14],
  '上云站': [15, -34],
  '乌干达_Africell': [32.290275, 1.373333],
  '尼日利亚_Glo': [8.675277, 9.081999]
}
//网络链接
var pack_loss_probability = [
  {fromName: '北京', hostid: '10084', toName: '亚马逊云', value: 0},
  {fromName: '乌干达_Africell', hostid: '10593', toName: '亚马逊云', value: 0},
  {fromName: '尼日利亚_Glo', hostid: '10601', toName: '亚马逊云', value: 0}
]
// cache节点
var cache_list = [
  {name: '乌干达_Africell', groupid: '60', value: [0, 0], url: 'http://10.0.224.100:3000/d/0MiACYVmz/cachezhan-dian?orgId=1', height: 1014},
  {name: '尼日利亚_Glo', groupid: '61', value: [0, 0], url: 'http://10.0.224.100:3000/d/0MiACYVmz/cachezhan-dian?orgId=1', height: 1014}
]
// 南非OS组id、南非ott上云组id、gslb的主机id
var groupid_ott = 55, group_os = 54, gslb_staging_manage_hostid = 10611
// 各个cache节点对应的子页面地址
var cache_url = {
  'UGA-Africell-SER-OS-01': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'UGA-Africell-SER-MGT-01': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'UGA-Africell-SER-STR-01': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'UGA-Africell-SER-MGT-02': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'NGA-Glo-SER-CAC-01': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'NGA-Glo-SER-CAC-02': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'NGA-Glo-SER-MGT-01': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'NGA-Glo-SER-STR-01': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'NGA-Glo-SER-STR-07': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1',
  'NGA-Glo-SER-MGT-02': 'http://10.0.224.100:3000/d/x7_B_94mk/cache-jie-dian-ji-bie-shu-ju-jian-kong?orgId=1'
}
// 获取统一的状态色
var getColor = function(type) {
  if (type == 'good') {
    return '#20986a'
  } else if (type == 'well') {
    return '#d1c227'
  } else {
    return '#ff1d04'
  }
}
// 格式化数字输出
var format_number = function(n) {
  var b = parseInt(n).toString()
  var len = b.length
  if (len <= 3) {
    return b
  }
  var r = len % 3
  return r > 0 ? b.slice(0, r) + "," + b.slice(r, len).match(/\d{3}/g).join(",") : b.slice(r, len).match(/\d{3}/g).join(",")
}

// 格式化
var convertLinesData = function(data) {
  var res = []
  for (var i = 0; i < data.length; i++) {
    var dataItem = data[i]
    var fromCoord = geoCoordMap[dataItem.fromName]
    var toCoord = geoCoordMap[dataItem.toName]
    if (fromCoord && toCoord) {
      var type = dataItem.value < 10 ? 'good' : dataItem.value < 50 ? 'well' : 'bad'
      res.push({
        fromName: dataItem.fromName,
        toName: dataItem.toName,
        coords: [fromCoord, toCoord],
        lineStyle: {
          normal: {
            color: getColor(type),
            width: 1,
            opacity: 0.6,
            curveness: 0.2
          }
        }
      })
    }
  }
  return res
}
var convertPonitData = function(data) {
  var res = []
  for (var i = 0; i < data.length; i++) {
    var dataItem = data[i]
    var coord = geoCoordMap[dataItem.name]
    if (coord) {
      var type_cathe = dataItem.value[0] <= 0 ? 'good' : dataItem.value[0] < 5 ? 'well' : 'bad'
      var type_load = dataItem.value[1] < 80 ? 'good' : dataItem.value[1] < 90 ? 'well' : 'bad'
      res.push({
        name: dataItem.name,
        value: coord.concat(dataItem.value),
        groupid: dataItem.groupid,
        itemStyle: {
          normal: {
            color: getColor(type_cathe)
          }
        },
        label: {
          show: true,
          position: 'bottom',
          padding: [5, 0, 0, 0],
          formatter: function(params) {
            return params.value[3] + '%'
          },
          color: getColor(type_load)
        }
      })
    }
  }
  return res
}
// svg 路径
var awsPath = 'path://M522.72466,272.2c-28,115-26.2,108.8-51.6,214-3.2,13-8.2,16.8-21.4,17h-28.8c-11.6-0.2-16.4-3.2-19.8-14.6-24.6-78.8-57.6-188.2-79.8-261.4-8.2-27-2.8-26.4,18.6-25.8,7.4,0.2,14.6,0,22,0,10.2,0.2,15.4,4,18.2,14.2,7.2,25.8,12,45.6,53.2,208.2,0.8,3.2,1.8,6.2,2.8,9.2h2.2c1-4,2.2-7.8,3.2-11.8,15.6-65.8,31-131.8,46.6-197.6,4.8-20.4,13.4-22.4,34-22.4h15.2c13.8,0.2,18,3,21.4,16.6,12,46.8,47,203.6,53.4,220.8,10.2-36.6-3.6,15.8,57-218,4.2-16.2,8.2-19.4,24.6-19.4h25.4c10.8,0.2,14,3.6,11.4,14.2-4.8,19-5.8,19.8-82.6,265.8-6.2,19.8-8.4,21.6-29.2,21.6h-21.2c-14.6,0-18.4-2.6-22-16.8-8.6-32.4-46.6-191.4-52.8-213.8zM251.12466,494.6c8.4,11.6,16.2,12.6,28.2,4.8l12.6-8.4c13.6-9,14.6-12.6,7.2-27-8.6-16.8-12.8-34.6-12.6-53.8,0-6.2,1.2-111.4-1.8-133.6-5.4-38.6-25-65.6-63.4-77.4-21.4-6.8-43.4-6.6-65.4-6-30.2,0.8-58.8,9.2-85.6,22.8-3.6,1.8-7.4,6.2-8.2,9.8-1.6,7.8-2.2,16.2-1.4,24.2,1.2,11.8,5.2,14,16.4,10.2,10.2-3.4,20-7.8,30.2-10.8,29-8.8,58.4-12.8,88.2-3.4,14.2,4.4,23.4,13.8,28.6,27.6,6,15.8,4.8,32.2,4.8,48.4,0,11-0.2,11-11,9-27.8-5.2-55.4-10-83.8-6.2-30.4,4.2-57.2,14.6-76.4,40-18.2,24-20,51.2-14.8,79,5.6,30,23.6,51.4,52.8,60.8,41.2,13.4,80.2,6.6,115.4-19,7.6-5.6,14.4-12.4,22.2-19,6.2,10,11.6,19.4,17.8,28z,m-30.6-123.2c6,0.8,9,3.8,8.6,10.2-0.4,7.6,0.2,15.2-0.6,22.8-2.4,23.4-15.4,39.4-35.8,49.8-16.4,8.4-33.8,11.6-52.2,10-30.4-2.6-42-26.2-39.2-52.6C103.92466,386.4,118.32466,372.4,144.32466,368c27.6-4.8,32-2.2,76.2,3.4z,m697.6,130.2c42.6-17.2,65.8-52.4,58.4-100-4.4-29.2-23.6-48.4-50.4-59-29.4-11.8-67.6-20.6-96.2-36.4-8.8-4.8-14.8-12.6-15.2-23.8-0.8-22.2,8.4-34.4,30.8-39.6,18.6-4.2,37.6-4.4,56.2-0.8,14.6,2.8,28.6,8.4,42.8,12.6,5.6,1.8,11.8,4.2,15.6-3.2,7.6-14.6,0.8-37.4-14.6-43.6-45-18-91-23.2-136.4-3.2-29.2,12.8-49.2,34.8-52,68.4-3.2,38.6,13.8,66.8,48.2,83.4,15.4,7.4,32.2,11.8,48.4,17.8,16.2,6,32.4,11.6,48.2,18.2,24.6,10.6,23.2,48.4,2.4,60-55.4,30.6-129.8-4.8-138.4-7.6-6.6-2.2-10.6,0.4-12.6,7.4-6,22.6,1.4,37.6,23.2,45.4,43.4,15.8,99.2,21,141.6,4zM592.32466,827c101.6-11.6,197.4-41.6,285.4-94,16-9.4,31-20.6,46.2-31.4,14.6-10.4,6.4-36.8-22.6-24.4-108.8,46.4-222.4,72.2-340.4,77.8-61,3-121.6-0.6-182.2-9.4-126.2-18.4-244.8-58.4-355.2-122.4-4.2-2.4-8.4-5-13-6-9.8-2.2-15.4,9.4-4.8,19.4,48,44.2,100.6,81.6,158.2,111.4,107.4,55.4,221,85.4,342.4,84,28.8-1.6,57.6-1.8,86-5z,m349.4-184.4c29.6,1.6,38.8,11.8,31.4,40.4-7.6,29.6-18.6,58.4-27.8,87.6-1.8,5.8-8.4,12.6-1.6,17.6,7.4,5.2,13-2,18-6.6,20.4-19,34.8-42,45-67.6,10.8-26.8,18.6-54.4,17.4-83.8-0.4-12.4-3.6-17.6-15.6-21-10.8-3-22-5.6-33-6.4-43.2-3.6-85,1-124,21.2-6.2,3.2-12,7.4-17.4,11.8-2.2,1.8-6.4,10.6,4.8,12.2,3.8,0.6,7.8-0.2,11.8-0.6,33.8-3.2,57.2-6.6,91-4.8z'
var chinaPath = 'image://./img/中国.svg'
var satellitePath = 'path://M637.009,109.156L524.021-3.833c-15.766-15.765-40.727-15.765-55.18,0L304.614,160.394,c-15.765,15.766-15.765,40.727,0,55.18l44.668,44.672l-22.332,22.332l-14.453-14.45c-21.019-21.023-48.609-30.218-74.887-30.218,c-35.472-28.903-81.457-32.844-107.734-6.571c-26.273,26.278-22.332,72.262,6.57,107.735c0,27.59,9.196,53.867,30.219,74.886,l14.449,14.454l-22.332,22.332l-44.672-44.668c-15.765-15.766-40.726-15.766-55.179,0l-164.227,164.226,c-15.765,15.766-15.765,40.731,0,55.18L7.692,738.472c15.766,15.766,40.727,15.766,55.18,0l164.227-164.226,c15.765-15.767,15.765-40.728,0-55.181l-38.102-38.102l22.336-22.332l49.922,49.922c13.141-30.215,34.16-60.433,60.434-86.711,c26.277-26.273,56.496-47.297,86.715-60.433l-49.926-49.926l22.336-22.336l38.098,38.101c15.77,15.766,40.73,15.766,55.184,0,l164.227-164.226c14.449-14.449,14.449-39.414-1.316-53.863v-0.004H637.009z,M637.009,109.156,M598.907,392.937c-2.625-2.625-6.566-5.254-9.195-6.566c0,0-1.316,0-1.316-1.313c-2.629-1.316-3.941-2.629-6.566-3.941,h-1.316c-64.375-35.477-164.223-10.512-237.797,63.058c-74.887,74.887-98.535,173.426-63.063,237.801,c1.313,2.629,2.629,3.941,3.942,6.57c0,0,0,1.313,1.312,1.313c2.629,3.941,5.254,6.57,6.571,9.199,c27.589,18.392,89.339-5.258,155.027-57.809l-32.844-26.277c-39.414,31.531-70.945,48.613-80.141,40.731,c-11.824-11.825,27.59-70.946,88.023-131.384c60.438-60.438,119.559-99.848,131.383-88.023c7.883,7.879-6.57,35.469-34.16,70.941,l26.277,32.848C594.97,477.022,617.302,419.214,598.907,392.937L598.907,392.937z,M598.907,392.937,M441.251,568.988c-10.508-7.884-10.508-22.332-1.313-31.532l3.941-3.941c9.195-9.195,23.648-7.883,31.531,1.316,l35.473,43.352c7.883,10.512,7.883,26.281-1.316,35.478l11.824-11.825c-9.195,9.196-24.961,10.508-35.473,1.313L441.251,568.988z,,M441.251,568.988,M526.282,586.699c-16.727,0-30.652,13.925-31.586,29.733c0,16.724,13.008,29.731,31.586,29.731,c16.723,0,31.582-13.008,31.582-29.731C556.946,598.772,543.009,586.699,526.282,586.699L526.282,586.699z,M526.282,586.699,M604.321,586.699c0,27.879-11.156,53.882-32.52,73.39c-20.441,20.442-47.375,30.664-77.121,30.664v42.739,c85.477,0,153.297-65.953,154.23-146.793H604.321z,M604.321,586.699,M683.282,585.781c0,98.468-84.543,179.293-188.586,179.293V807.8c128.203,0,233.176-99.402,233.176-222.035h-44.59,V585.781z,M683.282,585.781'
var radarPath = 'path://M243.027,260.855c0-33.984-38.727-54.136-70.34-31.218c-26.082,19.363-12.25,73.109,28.848,73.109,c9.09,0,1.184-0.394,8.691-2.371l81.805,103.535c-11.855,8.301-157.281,154.121-161.629,163.207,c20.945,13.832,33.984,31.219,70.34,48.211c53.352,25.688,77.852,24.504,135.152,24.504c34.772,0,61.647-12.647,88.519-20.551,c-10.671,15.414-54.14,98.793-69.155,123.692c-5.531,9.483-47.816,63.226,3.555,63.226h294.012,c10.671,0,23.316-7.902,23.316-18.969c0-11.063-31.613-64.414-38.332-73.5l-95.633-168.742c-15.41-25.688-7.509-11.855,9.484-45.84,c37.542-74.688,42.68-156.488,8.296-233.945c-8.296-18.574-36.354-65.203-52.953-75.476c-16.198,9.484-62.043,64.808-84.961,82.195,c-11.065,8.695-77.452,73.898-84.172,84.172c-7.905-7.508-14.621-12.25-22.526-19.758l-74.293-60.066,C241.051,265.996,243.027,270.34,243.027,260.855L243.027,260.855z,M247.77-13c-74.688,0-145.031,27.266-200.75,73.898,L5.527,101.207c-17.785,21.34-38.727,58.484-49.004,83.777c-19.363,45.84-17.781,58.09-22.523,100.77l0.395,46.629h28.453,c0-60.461,0.789-93.262,24.895-146.215c8.301-17.781,15.809-28.848,26.082-44.652l49.398-55.329,c45.445-43.863,118.551-68.363,184.547-68.363V-13z,M247.77,17.824,M39.906,269.945c1.582-21.34,18.574-55.324,28.453-69.156c4.348-6.32,5.531-9.484,10.273-15.016,c4.348-5.136,5.93-7.507,10.277-12.644l37.539-35.172c33.59-24.5,82.199-40.309,125.668-40.309V66.824,c-35.566,0-72.711,9.485-98.004,21.34c-15.414,7.113-24.895,12.648-37.938,21.34c-5.926,3.953-11.461,7.902-16.992,12.645,c-29.637,24.899-49,47.028-66.785,81.407C5.922,254.93,9.875,284.566,5.527,292.473v39.121h29.637,C35.164,319.344,32.398,280.617,39.906,269.945L39.906,269.945z,M39.906,269.945,M211.809,181.426c8.301-4.348,25.688-2.371,39.914-2.371c0-11.461,1.184-22.129-2.371-30.032,c-48.609-2.371-74.293,10.668-102.352,29.637l-23.316,22.922c-12.25,18.57-22.918,30.426-28.055,56.508,c-5.93,28.847-5.93,45.84,0.395,74.293h30.824c-3.559-19.758-8.695-34.379-5.141-56.113c3.559-20.551,7.906-30.036,16.598-44.262,c1.977-3.555,4.348-6.321,6.719-9.485C160.438,204.742,188.887,183.797,211.809,181.426L211.809,181.426z,M211.809,181.426,M3.156,333.965h34.379l2.371-64.02c-7.508,10.672-4.742,49.399-4.742,61.649H5.527v-39.121L3.156,333.965z,,M254.094,181.426v-18.574c0.395-15.805-0.395-11.852-4.742-13.829c3.555,7.903,2.371,18.571,2.371,30.032,c-14.227,0-31.613-1.977-39.914,2.371H254.094z,M147,178.66c-7.902,2.371-7.902,4.742-13.039,9.879,c-5.535,5.531-7.512,5.531-10.277,13.043L147,178.66z,M123.684,201.582'
