<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>四达时代数字电视网络平台</title>
  <link rel="stylesheet" href="css/world.css?version=1528769604144">
  <link rel="stylesheet" type="text/css" href="css/font/iconfont.css?version=1528769604144">
  <style media="screen">
    body {
      background-color: #BEDBF9;
    }
  </style>
</head>

<body>
  <div id="main"></div>
  </div>
  <script src="./js/jquery.min.js?version=1528769604144" charset="utf-8"></script>
  <script src="./js/echarts.min.js?version=1528769604144" charset="utf-8"></script>
  <script src="./map/world.js?version=1528769604144"></script>
  <script src="./map/ses-5.js?version=1528769604144"></script>
  <script src="./js/world.js?version=1528769604144"></script>
  <script type="text/javascript">
    echarts.registerMap('world', worldMap)
    echarts.registerMap('ses5', SES5Map)
    var geoMap = {
      // 卫星
      'E10A-卫星': [30, 61],
      'E8WB-卫星': [60, 61],
      'SES5-卫星': [90, 61],
      // 北京总部
      '北京-总部': [116, 39.5],
      '爱尔兰-亚马逊云': [-6, 52],
      'Startimes-VPN': [80, -3],
      // 上星站
      '南非-上星站': [21, -30],
      '南非(第二颗)-上星站': [23, -30],
      '南非-上星节点': [21, -33.5],
      '斯洛文尼亚-上星站': [14.6, 45.95],
      '斯洛文尼亚(第二颗)-上星站': [12, 45.95],
      '斯洛文尼亚-上星节点': [14.6, 43],
      '德国-上星站': [8, 50],
      '尼日利亚(阿布贾)-上星站': [8.1738, 11],
      '尼日利亚(拉各斯)-上星站': [13.095, 12.039],
      '尼日利亚(第三颗)-上星站': [11, 14],
      '喀麦隆-上星站': [10, 5.12],
      '刚果金-上星站': [18, -3],
      '乌干达-上星站': [33.75, 4.33],
      '肯尼亚-上星站': [36.65, -0.5],
      '布隆迪-上星站': [28.1, -5.1],
      '坦桑尼亚-上星站': [33.2, -3],
      '赞比亚-上星站': [30.827, -11.049],
      '莫桑比克-上星站': [33.31, -23.72],
      //发射台
      '几内亚-发射台': [-12, 10],
      '尼日利亚-发射台': [11, 9],
      '喀麦隆-发射台': [13.5, 5.12],
      '中非-发射台': [21, 8],
      '刚果金-发射台': [16, 0],
      '刚果布-发射台': [21, -0.2],
      '乌干达-发射台': [31.6, 2.55],
      '卢旺达-发射台': [29.4, -1.7],
      '肯尼亚-发射台': [37.44, 3.03],
      '布隆迪-发射台': [30.1, -5.1],
      '坦桑尼亚-发射台': [37, -6],
      '赞比亚-发射台': [24.52, -14.17],
      '莫桑比克-发射台': [39.199, -13.068],
      '马达-发射台': [46.84, -18.72],
      //发射台中心
      '几内亚-发射台中心': [-12, 10],
      '尼日利亚-发射台中心': [11, 9],
      '喀麦隆-发射台中心': [13.5, 5.12],
      '中非-发射台中心': [21, 8],
      '刚果金-发射台中心': [16, 0],
      '刚果布-发射台中心': [21, -0.2],
      '乌干达-发射台中心': [31.6, 2.55],
      '卢旺达-发射台中心': [29.4, -1.7],
      '肯尼亚-发射台中心': [37.44, 3.03],
      '布隆迪-发射台中心': [30.1, -5.1],
      '坦桑尼亚-发射台中心': [37, -6],
      '赞比亚-发射台中心': [24.52, -14.17],
      '莫桑比克-发射台中心': [39.199, -13.068],
      '马达-发射台中心': [46.84, -18.72],
      // 播控中心
      '北京-播控中心': [112, 39.36],
      '肯尼亚-播控中心': [40.42, 2],
      '尼日利亚-播控中心': [5, 10.74],
      '坦桑尼亚-播控中心': [32.56,-5.96],
      '南非-播控中心': [26, -30],
      // CDN
      '塞内加尔-CDN': [-15.64, 14.98],
      '几内亚-CDN': [-9, 9],
      '加纳-CDN': [-1, 7.88],
      '科特迪瓦-CDN': [-5.53, 6.31],
      '尼日利亚-CDN': [6, 6],
      '刚果金-CDN': [14, -3],
      '刚果布-CDN': [25, -5],
      '乌干达-CDN': [32, -0.4],
      '卢旺达-CDN': [27, -2.7],
      '肯尼亚-CDN': [39.15,-3.5],
      '布隆迪-CDN': [29,-4.5],
      '坦桑尼亚-CDN': [36.16, -9.49],
      '赞比亚-CDN': [26.36, -16.8],
      '莫桑比克-CDN': [34.18, -19.51],
      '南非-CDN': [28, -27],
      '马达-CDN': [45.439, -23.966],
      // 路由
      '肯尼亚-路由': [40, -1.5],
      '坦桑尼亚-路由': [34.5, -7.8],
      '乌干达-路由': [33.27, 1.537],
      '赞比亚-路由': [29.7, -14.349],
      '莫桑比克-路由': [38.18, -16.04],
      '尼日利亚-路由': [8, 8],
      '南非-路由': [24, -28],
      // 拓展中
      '土耳其-拓展中': [35.2, 38.96],
      '哈塞克斯坦-拓展中': [66.9, 48],
      '巴基斯坦-拓展中': [69.34, 30.37],
      '尼泊尔-拓展中': [84.12, 28.39],
      '印度-拓展中': [78.96, 20.59],
      '孟加拉-拓展中': [90.35, 23.68],
      '缅甸-拓展中': [95.9, 21.9],
      '柬埔寨-拓展中': [104.99, 12.56],
      '马来西亚-拓展中': [101.97, 4.21],
      '菲律宾-拓展中': [121.77, 12.87],
      '萨摩亚-拓展中': [135, 5]
    }

    var worldCount = {
      ku: 1,
      c: 2,
      bo: 5,
      xing: 16,
      cdn: 20,
      ta: 324,
      live: 480,
      country: 45,
      person: 9.7,
      fst: {
        '几内亚-发射台': 2,
        '尼日利亚-发射台': 82,
        '喀麦隆-发射台': 2,
        '中非-发射台': 1,
        '刚果金-发射台': 4,
        '刚果布-发射台': 5,
        '乌干达-发射台': 8,
        '卢旺达-发射台': 6,
        '肯尼亚-发射台': 23,
        '布隆迪-发射台': 12,
        '坦桑尼亚-发射台': 19,
        '赞比亚-发射台': 72,
        '莫桑比克-发射台': 87,
        '马达-发射台': 1,
      },
    }

    var wei = 'image://./img/world/wei.png',
    bo = 'image://./img/world/bo.png',
    ta = 'image://./img/world/ta.png',
    xing = 'image://./img/world/xing.png',
    startimes = 'image://./img/world/beijing.png',
    aws = 'image://./img/world/aws.png',
    dian = 'image://./img/world/dian.png',
    vpn = 'image://./img/world/vpn.png',
    route = 'image://./img/world/route.png',
    cdn = 'image://./img/world/cdn.png',
    build = 'image://./img/world/build.png'

    // var lineColor = ['#6efa01', '#0da1ed', '#9c26b5', '#ffffff']
    var lineColor = ['#0da1ed', '#0da1ed', '#0da1ed', '#0da1ed']

    var dthCountryData = ['Senegal', 'Mali', 'Guinea', 'Sierra Leone', 'Benin', 'Côte d\'Ivoire', 'Ghana', 'Nigeria', 'Togo', 'Chad', 'Cameroon', 'Sudan', 'Central African Rep.', 'Gabon', 'Congo', 'Dem. Rep. Congo', 'Uganda', 'Kenya', 'Rwanda', 'Burundi', 'Tanzania', 'Malawi', 'Zambia', 'Mozambique', 'South Africa', 'Lesotho', 'Swaziland', 'Madagascar', 'Zimbabwe', 'Mauritius']
    // var dthCountryData = ['塞内加尔', '马里', '几内亚', '塞拉利昂', '贝宁', '科特迪瓦', '加纳', '尼日利亚', '多哥', '乍得', '喀麦隆', '苏丹', '中非', '加蓬', '刚果布', '刚果金', '乌干达', '肯尼亚', '卢旺达', '布隆迪', '坦桑尼亚', '马拉维', '赞比亚', '莫桑比克', '南非', '莱索托', '斯威士兰', '马达加斯加', '津巴布韦', '毛里求斯']

    var nameMap = {
      'Senegal': '塞内加尔',
      'Mali': '马里',
      'Guinea': '几内亚',
      'Sierra Leone': '塞拉利昂',
      'Benin': '贝宁',
      'Côte d\'Ivoire': '科特迪瓦',
      'Ghana': '加纳',
      'Nigeria': '尼日利亚',
      'Togo': '多哥',
      'Chad': '乍得',
      'Cameroon': '喀麦隆',
      'Sudan': '苏丹',
      'Central African Rep.':'中非',
      'Gabon': '加蓬',
      'Congo': '刚果布',
      'Dem. Rep. Congo': '刚果金',
      'Uganda': '乌干达',
      'Kenya': '肯尼亚',
      'Rwanda': '卢旺达',
      'Burundi': '布隆迪',
      'Tanzania': '坦桑尼亚',
      'Malawi': '马拉维',
      'Zambia': '赞比亚',
      'Mozambique': '莫桑比克',
      'South Africa': '南非',
      'Lesotho': '莱索托',
      'Swaziland': '斯威士兰',
      'Madagascar': '马达加斯加',
      'Zimbabwe': '津巴布韦',
      'Mauritius': '毛里求斯'
    }

    var coverData = function(data, name) {
      var res = []
      for(var x in data) {
        var type = x.split('-')
        if (name === type[1]) {
          switch(type[1]) {
            case '上星站':
              res.push({ name: x, value: data[x], symbol: xing, symbolSize: 30 })
              break;
            case '发射台':
              res.push({ name: x, value: data[x].concat(worldCount.fst[x]), symbol: ta, symbolSize: [20, 30], label: {show: true, offset: [0, -30], formatter: '{@[2]}', textStyle: {color: '#fff', fontSize: 12}} })
              break;
            case '播控中心':
              res.push({ name: x, value: data[x], symbol: bo, symbolSize: [27, 25] })
              break;
            case 'CDN':
              res.push({ name: x, value: data[x], symbol: cdn, symbolSize: 15  })
              break;
            case '发射台中心':
              res.push({ name: x, value: [data[x][0], data[x][1] + 1.8] })
              break;
            case '路由':
              res.push({ name: x, value: data[x], symbol: route, symbolSize: [20, 17] })
              break;
            case '拓展中':
              res.push({ name: x, value: data[x], symbol: build, symbolSize: 20, label: {show: true, position: 'right', formatter: function(param){return param.name.replace('-拓展中', '')}, textStyle: {color: '#fff', fontSize: 12}} })
              break;
          }
        }
        if (name == 'CDN节点' && type[1] == 'CDN') {
          res.push({ name: x, value: data[x] })
        }
      }
      return res
    }

    var coverLines = function(name, x, y, color) {
      var line = {
        name: name,
        type: 'lines',
        coordinateSystem: 'geo',
        z: 5,
        effect: {
          show: true,
          constantSpeed: 30,
          symbol: 'arrow',
          symbolSize: 5,
          trailLength: 0,
        },
        lineStyle: {
          normal: {
            color: color,
            width: 0.5,
            opacity: 1,
            curveness: 0
          },
          label: {
            show: true,
            fontSize: 12,
            color: '#fff'
          }
        },
        emphasis: {
          normal: {
            color: color,
            width: 0.5,
            opacity: 1,
            curveness: 0
          },
          label: {
            show: true,
            fontSize: 12,
            color: '#fff'
          }
        },
        data: [

        ]
      }

      if (x instanceof Array) {
        for(var i=0,len=x.length;i<len;i++){
          var from = geoMap[x[i]], to = geoMap[y]
          if (x[i].indexOf('卫星') >= 0) {
            from = [from[0] - 2.5, from[1] - 2.3]
          }
          if (y.indexOf('卫星') >= 0) {
            to = [to[0] - 2.5, to[1] - 2.3]
          }
          line.data.push({name: y, coords: [from, to]})
        }
      } else {
        for(var i=0,len=y.length;i<len;i++){
          var from = geoMap[x], to = geoMap[y[i]]
          if (x.indexOf('卫星') >= 0) {
            from = [from[0] - 2.5, from[1] - 2.3]
          }
          if (y[i].indexOf('卫星') >= 0) {
            to = [to[0] - 2.5, to[1] - 2.3]
          }
          line.data.push({name: x, coords: [from, to]})
        }
      }
      if (name == 'VPN') {
        line.lineStyle.normal.curveness = 0
        line.lineStyle.normal.width = 1
        line.lineStyle.normal.opacity = 0.8
        line.effect.symbol = 'pin'
        line.effect.symbolSize = 7
      }
      return line
    }

    var ignoreCountry = ['Russia', 'Norway', 'Greenland', 'Australia', 'Sweden', 'Finland', 'Iceland', 'Mongolia', 'Canada',
     'United States', 'Mexico', 'Brazil', 'Cuba', 'Haiti','Guatemala', 'Belize', 'Nicaragua', 'Panama', 'Bahamas', 'Barbados', 'Dominica',
      'Honduras', 'Dominican Rep.', 'El Salvador', 'Costa Rica', 'Jamaica', 'Paraguay', 'Argentina', 'Bolivia', 'Chile', 'Colombia', 'Ecuador',
       'Guyana', 'Peru', 'Suriname', 'Uruguay', 'Venezuela', 'Puerto Rico', 'Trinidad and Tobago']
    var regions= [].concat([], ignoreCountry.map(function (item) {
      return {
        name: item,
        itemStyle: {
          opacity: 0.3,
        },
        emphasis: {
          itemStyle: {
            opacity: 0.3,
          },
          label: {
            show: false
          }
        }
      }
    }))
    var regionsBg= [].concat(ignoreCountry.map(function (item) {
      return {
        name: item,
        itemStyle: {
          opacity: 0,
        },
        emphasis: {
          itemStyle: {
            opacity: 0,
          },
          label: {
            show: false
          }
        }
      }
    }))

    var options = {
      legend: {show: false},
      geo: [
        {
          id: 0,
          name: '非洲地图',
          map: 'world',
          zoom: 2.4,
          center: [50, 13],
          aspectScale: 1.1,
          roam: true,
          z: 2,
          itemStyle: {
            opacity: 1,
            color: '#F5F5F5',
            borderWidth: 1,
            borderColor: '#FED669'
          },
          emphasis: {
            label: {
              show: true,
              color: '#A1AEAC',
              fontSize: 12
            },
            itemStyle: {
              opacity: 1,
              color: '#F5F5F5',
              borderWidth: 1,
              borderColor: '#FED669'
            },

          },
          label: {
            show: false,
            color: '#4E8549',
            fontSize: 12
          },
          regions: regions
        }
      ],
      series: []
    }

    var myChart = echarts.init(document.getElementById('main'))
    myChart.setOption(options)
  </script>
</body>

</html>
